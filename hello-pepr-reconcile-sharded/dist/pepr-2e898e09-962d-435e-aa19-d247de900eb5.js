var m=Object.defineProperty;var t=(e,n)=>m(e,"name",{value:n,configurable:!0});var d=require("pepr");var i={name:"hello-pepr-reconcile-sharded",version:"0.0.1",description:"Pepr feature: Reconcile",keywords:["pepr","k8s","policy-engine","pepr-module","security"],engines:{node:">=18.0.0"},pepr:{uuid:"2e898e09-962d-435e-aa19-d247de900eb5",onError:"reject",webhookTimeout:10,customLabels:{namespace:{"pepr.dev":""}},alwaysIgnore:{namespaces:[]},includedFiles:[],env:{PEPR_RECONCILE_STRATEGY:"sharded"}},dependencies:{pepr:"^0.34.1"},devDependencies:{"@jest/globals":"^29.7.0","@types/node":"^20.13.0",jest:"^29.7.0","kubernetes-fluent-client":"^2.6.1",typescript:"5.3.3"},scripts:{pepr:"pepr",cli:"npm run --workspace helpers cli -- --module=$(pwd)",test:"npm run cli -- test --suite all","test:e2e":"npm run cli -- test --suite e2e","test:unit":"npm run cli -- test --suite unit"}};var r=require("pepr");var s=new r.Capability({name:"hello-pepr-reconcile",description:"A Kubernetes Operator that manages WebApps",namespaces:["hello-pepr-reconcile"]}),{When:f}=s,a=t((e,n,o)=>{r.Log.info(`Callback: Reconciling ${e} ${n}${o}`)},"log"),l=t((e,n)=>new Promise(o=>{let p=e.metadata.name,c=e.data.note;a(p,c,"+"),setTimeout(()=>{a(p,c,"-"),o()},n)}),"task"),h=t(e=>l(e,300),"fast"),w=t(e=>l(e,500),"slow"),b=t(e=>{throw`oops: ${e}`},"oops");f(r.a.ConfigMap).IsCreatedOrUpdated().InNamespace("hello-pepr-reconcile").Reconcile(t(function(n){let{name:o}=n.metadata;if(o!=="kube-root-ca.crt")return o==="cm-slow"?w(n):o==="cm-fast"?h(n):b(n)},"keepsOrder"));new d.PeprModule(i,[s]);
//# sourceMappingURL=pepr-2e898e09-962d-435e-aa19-d247de900eb5.js.map
