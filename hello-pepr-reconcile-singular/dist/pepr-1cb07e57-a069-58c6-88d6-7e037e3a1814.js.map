{
  "version": 3,
  "sources": ["../pepr.ts", "../package.json", "../capabilities/reconcile.ts"],
  "sourcesContent": ["import { PeprModule } from \"pepr\";\nimport cfg from \"./package.json\";\n\nimport { HelloPeprReconcile } from \"./capabilities/reconcile\";\n\nnew PeprModule(cfg, [HelloPeprReconcile]);\n", "{\n  \"name\": \"hello-pepr-reconcile-singular\",\n  \"version\": \"0.0.1\",\n  \"description\": \"Pepr feature: Reconcile\",\n  \"keywords\": [\n    \"pepr\",\n    \"k8s\",\n    \"policy-engine\",\n    \"pepr-module\",\n    \"security\"\n  ],\n  \"engines\": {\n    \"node\": \">=18.0.0\"\n  },\n  \"pepr\": {\n    \"uuid\": \"1cb07e57-a069-58c6-88d6-7e037e3a1814\",\n    \"onError\": \"reject\",\n    \"webhookTimeout\": 10,\n    \"customLabels\": {\n      \"namespace\": {\n        \"pepr.dev\": \"\"\n      }\n    },\n    \"alwaysIgnore\": {\n      \"namespaces\": []\n    },\n    \"includedFiles\": [],\n    \"env\": {\n      \"PEPR_RECONCILE_STRATEGY\": \"singular\"\n    }\n  },\n  \"dependencies\": {\n    \"pepr\": \"^0.34.1\"\n  },\n  \"devDependencies\": {\n    \"@jest/globals\": \"^29.7.0\",\n    \"@types/node\": \"^20.13.0\",\n    \"jest\": \"^29.7.0\",\n    \"kubernetes-fluent-client\": \"^2.6.1\",\n    \"typescript\": \"5.3.3\"\n  },\n  \"scripts\": {\n    \"pepr\": \"pepr\",\n    \"cli\": \"npm run --workspace helpers cli -- --module=$(pwd)\",\n    \"test\": \"npm run cli -- test --suite all\",\n    \"test:e2e\": \"npm run cli -- test --suite e2e\",\n    \"test:unit\": \"npm run cli -- test --suite unit\"\n  }\n}\n", "import { Capability, Log, a } from \"pepr\";\n\nexport const HelloPeprReconcile = new Capability({\n  name: \"hello-pepr-reconcile\",\n  description: \"A Kubernetes Operator that manages WebApps\",\n  namespaces: [\"hello-pepr-reconcile\"],\n});\n\nconst { When } = HelloPeprReconcile;\n\nconst log = (name, note, tag) => {\n  Log.info(`Callback: Reconciling ${name} ${note}${tag}`);\n}\n\nconst task = (cm, durationMs) => new Promise<void>(resolve => {\n  const name = cm.metadata.name\n  const note = cm.data.note\n  log(name, note, \"+\")\n  setTimeout(() => { log(name, note, \"-\") ; resolve() }, durationMs)\n});\nconst fast = (cm) => task(cm, 300)\nconst slow = (cm) => task(cm, 500)\nconst oops = (cm) => { throw `oops: ${cm}` }\n\nWhen(a.ConfigMap)\n  .IsCreatedOrUpdated()\n  .InNamespace(\"hello-pepr-reconcile\")\n  .Reconcile(function keepsOrder(cm) {\n    const { name } = cm.metadata;\n\n    if (name === \"kube-root-ca.crt\") { return }\n\n    return (\n      name === \"cm-slow\" ? slow(cm) :\n      name === \"cm-fast\" ? fast(cm) :\n      oops(cm)\n    )\n  });\n"],
  "mappings": "+EAAA,IAAAA,EAA2B,gBCA3B,IAAAC,EAAA,CACE,KAAQ,gCACR,QAAW,QACX,YAAe,0BACf,SAAY,CACV,OACA,MACA,gBACA,cACA,UACF,EACA,QAAW,CACT,KAAQ,UACV,EACA,KAAQ,CACN,KAAQ,uCACR,QAAW,SACX,eAAkB,GAClB,aAAgB,CACd,UAAa,CACX,WAAY,EACd,CACF,EACA,aAAgB,CACd,WAAc,CAAC,CACjB,EACA,cAAiB,CAAC,EAClB,IAAO,CACL,wBAA2B,UAC7B,CACF,EACA,aAAgB,CACd,KAAQ,SACV,EACA,gBAAmB,CACjB,gBAAiB,UACjB,cAAe,WACf,KAAQ,UACR,2BAA4B,SAC5B,WAAc,OAChB,EACA,QAAW,CACT,KAAQ,OACR,IAAO,qDACP,KAAQ,kCACR,WAAY,kCACZ,YAAa,kCACf,CACF,EChDA,IAAAC,EAAmC,gBAE5B,IAAMC,EAAqB,IAAI,aAAW,CAC/C,KAAM,uBACN,YAAa,6CACb,WAAY,CAAC,sBAAsB,CACrC,CAAC,EAEK,CAAE,KAAAC,CAAK,EAAID,EAEXE,EAAMC,EAAA,CAACC,EAAMC,EAAMC,IAAQ,CAC/B,MAAI,KAAK,yBAAyBF,CAAI,IAAIC,CAAI,GAAGC,CAAG,EAAE,CACxD,EAFY,OAINC,EAAOJ,EAAA,CAACK,EAAIC,IAAe,IAAI,QAAcC,GAAW,CAC5D,IAAMN,EAAOI,EAAG,SAAS,KACnBH,EAAOG,EAAG,KAAK,KACrBN,EAAIE,EAAMC,EAAM,GAAG,EACnB,WAAW,IAAM,CAAEH,EAAIE,EAAMC,EAAM,GAAG,EAAIK,EAAQ,CAAE,EAAGD,CAAU,CACnE,CAAC,EALY,QAMPE,EAAOR,EAACK,GAAOD,EAAKC,EAAI,GAAG,EAApB,QACPI,EAAOT,EAACK,GAAOD,EAAKC,EAAI,GAAG,EAApB,QACPK,EAAOV,EAACK,GAAO,CAAE,KAAM,SAASA,CAAE,EAAG,EAA9B,QAEbP,EAAK,IAAE,SAAS,EACb,mBAAmB,EACnB,YAAY,sBAAsB,EAClC,UAAUE,EAAA,SAAoBK,EAAI,CACjC,GAAM,CAAE,KAAAJ,CAAK,EAAII,EAAG,SAEpB,GAAIJ,IAAS,mBAEb,OACEA,IAAS,UAAYQ,EAAKJ,CAAE,EAC5BJ,IAAS,UAAYO,EAAKH,CAAE,EAC5BK,EAAKL,CAAE,CAEX,EAVW,aAUV,EFhCH,IAAI,aAAWM,EAAK,CAACC,CAAkB,CAAC",
  "names": ["import_pepr", "package_default", "import_pepr", "HelloPeprReconcile", "When", "log", "__name", "name", "note", "tag", "task", "cm", "durationMs", "resolve", "fast", "slow", "oops", "package_default", "HelloPeprReconcile"]
}
